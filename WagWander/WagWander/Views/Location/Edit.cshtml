@model WagWander.Models.LocationDto

@{
    ViewBag.Title = "Edit Location";
}

<div class="custom-container mt-5">
    <h2 class="mb-4">@ViewBag.Title</h2>

    <form action="@Url.Action("Update", "Location")" method="post" enctype="multipart/form-data">
        <input type="hidden" name="LocationId" value="@Model.LocationId" />

        <div class="form-group">
            <label for="LocationName">Location Name</label>
            <input type="text" id="LocationName" name="LocationName" class="form-control" value="@Model.LocationName" required />
        </div>
        <div class="form-group">
            <label for="LocationDescription">Location Description</label>
            <input type="text" id="LocationDescription" name="LocationDescription" class="form-control" value="@Model.LocationDescription" required />
        </div>
        <div class="form-group">
            <label for="Category">Category</label>
            <input type="text" id="Category" name="Category" class="form-control" value="@Model.Category" required />
        </div>
        <div class="form-group">
            <label for="Address">Address</label>
            <input type="text" id="Address" name="Address" class="form-control" value="@Model.Address" required />
        </div>
        <div class="form-group">
            <label for="AverageRating">Average Rating</label>
            <input type="number" id="AverageRating" name="AverageRating" class="form-control" value="@Model.AverageRating" step="0.1" min="0" max="10" required />
        </div>
        <div class="form-group">
            <label for="LocationPic">Upload Picture (Max Size: 5MB)</label>
            <input type="file" id="LocationPic" name="LocationPic" class="form-control-file" accept="image/*" onchange="validateFileSize(this)" />
            <small class="form-text text-muted">Max file size: 5MB</small>
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
        <a href="@Url.Action("Details", new { id = Model.LocationId })" class="btn btn-secondary">Cancel</a>
    </form>
</div>

<script>
    function validateFileSize(input) {
        if (input.files && input.files[0]) {
            var fileSize = input.files[0].size; // Size in bytes
            var maxSize = 5 * 1024 * 1024; // 5MB

            if (fileSize > maxSize) {
                alert("File size exceeds 5MB. Please choose a smaller file.");
                input.value = ''; // Clear the input to reset
            }
        }
    }
</script>